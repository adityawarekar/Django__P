{% extends "base.html" %}
{% load static %}

{% block start %}
<div class="container mt-5">

  <!-- Add Recipe Form -->
  <form class="col-6 mx-auto card p-3 shadow-lg" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <h2>Add Recipe</h2>
    <hr>

    <div class="mb-3">
      <label class="form-label">Recipe Name</label>
      <input type="text" name="name" class="form-control" required>
    </div>

    <div class="mb-3">
      <label class="form-label">Recipe Description</label>
      <textarea name="description" class="form-control" required></textarea>
    </div>

    <div class="mb-3">
      <label class="form-label">Recipe Image</label>
      <input type="file" name="image" class="form-control">
    </div>

    <button type="submit" class="btn btn-success">Add Recipe</button>
  </form>

 <div class="mb-3">
   <form>
      <label class="form-label">Recipe Name</label>
      <input type="text"  name="Search" class="form-control" required>
    </div>
    <button type="submit" class="btn btn-primary">Search</button>
    </form>
  
  <!-- Recipes Table -->
  <h3 class="mt-5">All Recipes</h3>
  <table class="table table-bordered text-center align-middle">
    <thead class="table-dark">
      <tr>
        <th>#</th>
        <th>Recipe Name</th>
        <th>Recipe Description</th>
        <th>Image</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for receipe in receipes %}
      <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ receipe.receipe_name }}</td>
        <td>{{ receipe.receipe_description }}</td>
        <td>
          {% if receipe.receipe_image %}
            <img src="{{ receipe.receipe_image.url }}" alt="{{ receipe.receipe_name }}" width="100" height="100" class="img-thumbnail">
          {% else %}
            <span class="text-muted">No image</span>
          {% endif %}
        </td>
        <td>
          <a href="{% url 'update_receipe' receipe.id %}" class="btn btn-warning btn-sm me-2">Update</a>
          <a href="{% url 'delete_receipe' receipe.id %}" class="btn btn-danger btn-sm"
             onclick="return confirm('Are you sure you want to delete this recipe?');">
            Delete
          </a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5" class="text-muted">No recipes added yet.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
